#!/usr/bin/python

import os,random,math
import re,csv,datetime

myfiles = list()
myfiles = os.listdir(os.path.expanduser("~/Desktop/mlpr2/svm/dev/"))
print myfiles
datafile = open(os.path.expanduser("~/Desktop/mlpr2/svm/dev/digit_dev1.dat"),"r")
data = csv.reader(datafile,delimiter=",")
print datetime.datetime.now().time()

def createLine(myline,mylist):

	"""
	This function creates the <line> elements necessary for the input file for svm-perf 
	"""

	for i in range(1,len(mylist)-1):
		if(float(mylist[i]) == 0.0):
			continue
		else:
			myline = myline + " " +str(i)+":"+mylist[i]
	myline = myline +" "+"#"+" "+ mylist[0]+"\n"
	return myline


# creating the correct formatted file to input the svm_perf
outfile = open(os.path.expanduser("~/Desktop/mlpr2/svm/dev/digit_dev9.dat"),"w")
#each row in the data is a list
for row in data:
	line = ""
	listm = row
	#print  listm[92] + " "+ str(len(listm))
	length = len(listm)-1
	#print length
	if(int(listm[length]) == 1):
		line = line+"+1"
		#print "inside  == 1 " +listm[length]
		line = createLine(line,listm)
	else:
		line = line+"-1"
		#print listm[length]
		line = createLine(line,listm)
	outfile.write(line)
outfile.close() # closing the file is important here , if you open that file again to process data. [ getting a issue where the number of lines read are only 95 instead of 100 ]


print datetime.datetime.now().time()


